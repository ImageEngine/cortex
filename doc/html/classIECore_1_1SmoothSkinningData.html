<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Cortex: IECore::SmoothSkinningData Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceIECore.html">IECore</a>::<a class="el" href="classIECore_1_1SmoothSkinningData.html">SmoothSkinningData</a>
  </div>
</div>
<div class="contents">
<h1>IECore::SmoothSkinningData Class Reference<br/>
<small>
[<a class="el" href="group__skinningGroup.html">Smooth Skinning</a>]</small>
</h1><!-- doxytag: class="IECore::SmoothSkinningData" --><!-- doxytag: inherits="IECore::Data" -->
<p><code>#include &lt;<a class="el" href="SmoothSkinningData_8h_source.html">SmoothSkinningData.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for IECore::SmoothSkinningData:</div>
<div class="dynsection">
 <div class="center">
  <img src="classIECore_1_1SmoothSkinningData.gif" usemap="#IECore::SmoothSkinningData_map" alt=""/>
  <map id="IECore::SmoothSkinningData_map" name="IECore::SmoothSkinningData_map">
<area href="classIECore_1_1Data.html" alt="IECore::Data" shape="rect" coords="0,168,172,192"/>
<area href="classIECore_1_1Object.html" alt="IECore::Object" shape="rect" coords="0,112,172,136"/>
<area href="classIECore_1_1RunTimeTyped.html" alt="IECore::RunTimeTyped" shape="rect" coords="0,56,172,80"/>
<area href="classIECore_1_1RefCounted.html" alt="IECore::RefCounted" shape="rect" coords="0,0,172,24"/>
</map>
 </div>
</div>

<p><a href="classIECore_1_1SmoothSkinningData-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9c37e172004cab75d99c194f1bc59fad"></a><!-- doxytag: member="IECore::SmoothSkinningData::IE_CORE_DECLAREOBJECT" ref="a9c37e172004cab75d99c194f1bc59fad" args="(SmoothSkinningData, Data)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>IE_CORE_DECLAREOBJECT</b> (<a class="el" href="classIECore_1_1SmoothSkinningData.html">SmoothSkinningData</a>, <a class="el" href="classIECore_1_1Data.html">Data</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0ef5ba169c18754ee8203cdbce9df091"></a><!-- doxytag: member="IECore::SmoothSkinningData::influenceNames" ref="a0ef5ba169c18754ee8203cdbce9df091" args="() const " -->
const <a class="el" href="classIECore_1_1TypedData.html">StringVectorData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1SmoothSkinningData.html#a0ef5ba169c18754ee8203cdbce9df091">influenceNames</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the names of the influence objects, it is used for reference. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1d0eed42b8a7223b2f6d5070e7ad945f"></a><!-- doxytag: member="IECore::SmoothSkinningData::influenceNames" ref="a1d0eed42b8a7223b2f6d5070e7ad945f" args="()" -->
<a class="el" href="classIECore_1_1TypedData.html">StringVectorData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>influenceNames</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classIECore_1_1TypedData.html">M44fVectorData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1SmoothSkinningData.html#a1d3f19dda2c7df325aeb9825993e0f85">influencePose</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab72e8df2a0f60def980ae712f65c5f88"></a><!-- doxytag: member="IECore::SmoothSkinningData::influencePose" ref="ab72e8df2a0f60def980ae712f65c5f88" args="()" -->
<a class="el" href="classIECore_1_1TypedData.html">M44fVectorData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>influencePose</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classIECore_1_1TypedData.html">IntVectorData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1SmoothSkinningData.html#aaf913fd54c8eeaa038b5bde256d7f5d3">pointIndexOffsets</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7a1ef0ed6ba7784faacf9afd34af6687"></a><!-- doxytag: member="IECore::SmoothSkinningData::pointIndexOffsets" ref="a7a1ef0ed6ba7784faacf9afd34af6687" args="()" -->
<a class="el" href="classIECore_1_1TypedData.html">IntVectorData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>pointIndexOffsets</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classIECore_1_1TypedData.html">IntVectorData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1SmoothSkinningData.html#aa4c82bfc229ab63b0269a3e6b7499f28">pointInfluenceCounts</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1074145499fe2f72388ea66c9551697c"></a><!-- doxytag: member="IECore::SmoothSkinningData::pointInfluenceCounts" ref="a1074145499fe2f72388ea66c9551697c" args="()" -->
<a class="el" href="classIECore_1_1TypedData.html">IntVectorData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>pointInfluenceCounts</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classIECore_1_1TypedData.html">IntVectorData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1SmoothSkinningData.html#a13e79c29158c63bb1c58589f0ed7f142">pointInfluenceIndices</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8bfc1fce8a3563d4ef657a731e6b82f3"></a><!-- doxytag: member="IECore::SmoothSkinningData::pointInfluenceIndices" ref="a8bfc1fce8a3563d4ef657a731e6b82f3" args="()" -->
<a class="el" href="classIECore_1_1TypedData.html">IntVectorData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>pointInfluenceIndices</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classIECore_1_1TypedData.html">FloatVectorData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1SmoothSkinningData.html#a393b4cbe8b6f4e21314d93965fc2adcd">pointInfluenceWeights</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6f6d7abd63e18e4fd1b2d69cc45a661a"></a><!-- doxytag: member="IECore::SmoothSkinningData::pointInfluenceWeights" ref="a6f6d7abd63e18e4fd1b2d69cc45a661a" args="()" -->
<a class="el" href="classIECore_1_1TypedData.html">FloatVectorData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>pointInfluenceWeights</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab2cf653a2807fcd95cbc3bd983a7e4dc"></a><!-- doxytag: member="IECore::SmoothSkinningData::SmoothSkinningData" ref="ab2cf653a2807fcd95cbc3bd983a7e4dc" args="(ConstStringVectorDataPtr influenceNames, ConstM44fVectorDataPtr influencePose, ConstIntVectorDataPtr pointIndexOffsets, ConstIntVectorDataPtr pointInfluenceCounts, ConstIntVectorDataPtr pointInfluenceIndices, ConstFloatVectorDataPtr pointInfluenceWeights)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1SmoothSkinningData.html#ab2cf653a2807fcd95cbc3bd983a7e4dc">SmoothSkinningData</a> (ConstStringVectorDataPtr influenceNames, ConstM44fVectorDataPtr influencePose, ConstIntVectorDataPtr pointIndexOffsets, ConstIntVectorDataPtr pointInfluenceCounts, ConstIntVectorDataPtr pointInfluenceIndices, ConstFloatVectorDataPtr pointInfluenceWeights)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assign-All Constructor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab8511ba862db7fcafef910700d0e093d"></a><!-- doxytag: member="IECore::SmoothSkinningData::SmoothSkinningData" ref="ab8511ba862db7fcafef910700d0e093d" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1SmoothSkinningData.html#ab8511ba862db7fcafef910700d0e093d">SmoothSkinningData</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default constructor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acf902f5d466ab98f75b5b7f726cfa337"></a><!-- doxytag: member="IECore::SmoothSkinningData::validate" ref="acf902f5d466ab98f75b5b7f726cfa337" args="() const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1SmoothSkinningData.html#acf902f5d466ab98f75b5b7f726cfa337">validate</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">raises an exception if the smooth skinning data is not valid <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Defines a data class for storing smooth skinning data along with influenceNames and their respective pre-bind matrices. <a class="el" href="classIECore_1_1SmoothSkinningData.html">SmoothSkinningData</a> stores bind information for points that can be deformed using multiple weighted transforms. The most common usecase is probably smooth skinning / smooth binding of points on a geometry to a skeleton hierarchy.</p>
<p>Consider the following example for some valid <a class="el" href="classIECore_1_1SmoothSkinningData.html">SmoothSkinningData</a>:</p>
<p>influenceNames = [ infA, infB ] (this is a StringVector) influencePose = [ trfA, trfB ] (this is a M44fVector) pointInfluenceCounts = [ 1, 1, 2, 2, 1 ] pointIndexOffsets = [ 0, 1, 2, 4, 6 ] pointInfluenceIndices = [ 0, 0, 0, 1, 1, 0, 1 ] pointInfluenceWeights = [ 1.0, 1.0, 0.5, 0.5, 0.1, 0.9, 1.0 ]</p>
<p>The above <a class="el" href="classIECore_1_1SmoothSkinningData.html">SmoothSkinningData</a> (SSD) stores smooth skinning information for 5 points (P) influenced by 2 transforms. The number of points is only implicitly stored and equals the length of the 'pointIndexOffsets' and 'pointInfluenceCounts' arrays. For fast access, the weighting information, which is being held in 'pointInfluenceIndices' and 'pointInfluenceWeights', is stored in flat arrays. To retrieve this information for a specific point, one has to use two helper arrays: 'pointInfluenceCounts' indicates how many influences do influence the point. 'pointIndexOffsets' stores for each point where in the weighting info arrays the data specific to the point is stored.</p>
<p>So if we wanted to the skinning info for the 4th point, we'd do the following:</p>
<p>pid = 3 pio = pointIndexOffsets[pid] // = 4 pic = pointInfluenceCounts[pid] // = 2</p>
<p>With this information we can now index into the skinning info arrays</p>
<p>for (i = pio; i &lt; pio + pic; i++ ) { pii.push_back( pointInfluenceIndices[i] ) piw.push_back( pointInfluenceWeights[i] ) }</p>
<p>This gives us the indices of the influences on the point (pii = [1, 0]) and their weighting ( piw = [0.1, 0.9] ). The 'pointInfluenceIndices' are referring to the index of our data in the 'influencePose' and 'influenceNames' arrays. In our example, the 4th point is influenced by 0.9*trfA and 0.1*trfB. The 2nd point is influenced by 1.0*trfA and the third point is influenced by 50% from both infA and infB. </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a1d3f19dda2c7df325aeb9825993e0f85"></a><!-- doxytag: member="IECore::SmoothSkinningData::influencePose" ref="a1d3f19dda2c7df325aeb9825993e0f85" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classIECore_1_1TypedData.html">M44fVectorData</a>* IECore::SmoothSkinningData::influencePose </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns a pose (an array of matrices) describing the pre-bind, world-space transformation of the influence objects. This array has the same length than'influenceNames'. </p>

</div>
</div>
<a class="anchor" id="aaf913fd54c8eeaa038b5bde256d7f5d3"></a><!-- doxytag: member="IECore::SmoothSkinningData::pointIndexOffsets" ref="aaf913fd54c8eeaa038b5bde256d7f5d3" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classIECore_1_1TypedData.html">IntVectorData</a>* IECore::SmoothSkinningData::pointIndexOffsets </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns an array of indices indicating where in the 'pointInfluenceIndices' and 'pointInfluenceWeights' arrays the smooth skinning information for the particular point can be found. The array holds one entry per deformable point. </p>

</div>
</div>
<a class="anchor" id="aa4c82bfc229ab63b0269a3e6b7499f28"></a><!-- doxytag: member="IECore::SmoothSkinningData::pointInfluenceCounts" ref="aa4c82bfc229ab63b0269a3e6b7499f28" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classIECore_1_1TypedData.html">IntVectorData</a>* IECore::SmoothSkinningData::pointInfluenceCounts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns an array of counts (one entry per point) indicating how many entries in the 'pointInfluenceIndices' and 'pointInfluenceWeights' arrays from the respective 'pointIndexOffsets' are holding the smooth skinning information for the point. The array holds one entry per deformable point. </p>

</div>
</div>
<a class="anchor" id="a13e79c29158c63bb1c58589f0ed7f142"></a><!-- doxytag: member="IECore::SmoothSkinningData::pointInfluenceIndices" ref="a13e79c29158c63bb1c58589f0ed7f142" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classIECore_1_1TypedData.html">IntVectorData</a>* IECore::SmoothSkinningData::pointInfluenceIndices </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns an array that holds all influence indices for all points. The length of the array matches the 'pointInfluenceWeights'. The indices are refering to the respective index in the 'influencePose' and 'influenceNames' arrays. </p>

</div>
</div>
<a class="anchor" id="a393b4cbe8b6f4e21314d93965fc2adcd"></a><!-- doxytag: member="IECore::SmoothSkinningData::pointInfluenceWeights" ref="a393b4cbe8b6f4e21314d93965fc2adcd" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classIECore_1_1TypedData.html">FloatVectorData</a>* IECore::SmoothSkinningData::pointInfluenceWeights </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns an array that holds all influence weights for all points. The length of the array matches the 'pointInfluenceIndices' length. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/IECore/<a class="el" href="SmoothSkinningData_8h_source.html">SmoothSkinningData.h</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 5 Jan 2012 for Cortex by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
