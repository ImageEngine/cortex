<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Cortex: IECore::SphericalHarmonicsRotationMatrix&lt; V &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceIECore.html">IECore</a>::<a class="el" href="classIECore_1_1SphericalHarmonicsRotationMatrix.html">SphericalHarmonicsRotationMatrix</a>
  </div>
</div>
<div class="contents">
<h1>IECore::SphericalHarmonicsRotationMatrix&lt; V &gt; Class Template Reference<br/>
<small>
[<a class="el" href="group__shGroup.html">Spherical Harmonics</a>]</small>
</h1><!-- doxytag: class="IECore::SphericalHarmonicsRotationMatrix" -->
<p><code>#include &lt;<a class="el" href="SphericalHarmonicsRotationMatrix_8h_source.html">SphericalHarmonicsRotationMatrix.h</a>&gt;</code></p>

<p><a href="classIECore_1_1SphericalHarmonicsRotationMatrix-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aefe8d128035aa12c55694e6e829d16f6"></a><!-- doxytag: member="IECore::SphericalHarmonicsRotationMatrix::BaseType" ref="aefe8d128035aa12c55694e6e829d16f6" args="" -->
typedef V&nbsp;</td><td class="memItemRight" valign="bottom"><b>BaseType</b></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memTemplParams" colspan="2"><a class="anchor" id="a24e4238fbbd821a3221bf26e93ae8fb4"></a><!-- doxytag: member="IECore::SphericalHarmonicsRotationMatrix::SphericalHarmonicsRotationMatrix" ref="a24e4238fbbd821a3221bf26e93ae8fb4" args="(const Imath::Vec3&lt; S &gt; &amp;r)" -->
template&lt;class S &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">&nbsp;</td><td class="memTemplItemRight" valign="bottom"><b>SphericalHarmonicsRotationMatrix</b> (const Imath::Vec3&lt; S &gt; &amp;r)</td></tr>
<tr><td class="memTemplParams" colspan="2"><a class="anchor" id="a4d2d566ffc0958d2186d10cb25dcf99b"></a><!-- doxytag: member="IECore::SphericalHarmonicsRotationMatrix::setEulerAngles" ref="a4d2d566ffc0958d2186d10cb25dcf99b" args="(const Imath::Vec3&lt; S &gt; &amp;r)" -->
template&lt;class S &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><b>setEulerAngles</b> (const Imath::Vec3&lt; S &gt; &amp;r)</td></tr>
<tr><td class="memTemplParams" colspan="2"><a class="anchor" id="ae086c62c467eeb565a3ae7f88050b6b6"></a><!-- doxytag: member="IECore::SphericalHarmonicsRotationMatrix::setAxisAngle" ref="ae086c62c467eeb565a3ae7f88050b6b6" args="(const Imath::Vec3&lt; S &gt; &amp;ax, S ang)" -->
template&lt;class S &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><b>setAxisAngle</b> (const Imath::Vec3&lt; S &gt; &amp;ax, S ang)</td></tr>
<tr><td class="memTemplParams" colspan="2"><a class="anchor" id="a5fa2391216f996818847121ee2dc1a21"></a><!-- doxytag: member="IECore::SphericalHarmonicsRotationMatrix::setQuaternion" ref="a5fa2391216f996818847121ee2dc1a21" args="(const Imath::Quat&lt; S &gt; &amp;q)" -->
template&lt;class S &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><b>setQuaternion</b> (const Imath::Quat&lt; S &gt; &amp;q)</td></tr>
<tr><td class="memTemplParams" colspan="2"><a class="anchor" id="af7ff8d73f76dbec3fd011ef453d2b5a3"></a><!-- doxytag: member="IECore::SphericalHarmonicsRotationMatrix::setRotation" ref="af7ff8d73f76dbec3fd011ef453d2b5a3" args="(const Imath::Matrix44&lt; S &gt; &amp;m)" -->
template&lt;class S &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><b>setRotation</b> (const Imath::Matrix44&lt; S &gt; &amp;m)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae2dbbbd70fb39788a198eeda69ac651f"></a><!-- doxytag: member="IECore::SphericalHarmonicsRotationMatrix::rotation" ref="ae2dbbbd70fb39788a198eeda69ac651f" args="() const " -->
const Imath::Matrix44&lt; V &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>rotation</b> () const </td></tr>
<tr><td class="memTemplParams" colspan="2"><a class="anchor" id="ae8e45160537c7ea5d663c0deede8a7cf"></a><!-- doxytag: member="IECore::SphericalHarmonicsRotationMatrix::transform" ref="ae8e45160537c7ea5d663c0deede8a7cf" args="(SphericalHarmonics&lt; U &gt; &amp;sh) const " -->
template&lt;typename U &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><b>transform</b> (<a class="el" href="classIECore_1_1SphericalHarmonics.html">SphericalHarmonics</a>&lt; U &gt; &amp;sh) const </td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;typename V&gt;<br/>
 class IECore::SphericalHarmonicsRotationMatrix&lt; V &gt;</h3>

<p>Rotation class for Spherical Harmonics. Implements complex spherical harmonics rotation as described in Choi, Cheol Ho et al, "Rapid and stable determination of rotation
    matrices between spherical harmonics by direct recursion", J. Chem. Phys. Vol 111, No. 19, 1999, pp 8825-8831.</p>
<p>In order to actually work, I've changed the following equations: Equation 8.7: I used transposed W instead of the hermitian conjugate of W. That's the only way that the solution for R at equation 8.15 can be computed from F and G at 5.4-5.5 and 8.4-8.7. Equation 8.10: looks wrong because it always compute the same value for m!=0. Figuring out the correct values for alpha and beta that fit the equations 8.11-8.14 is hard. Instead, I've reapplied equation 8.7 and found the following relationships that substitutes 8.11-8.14: i=0,j=0: R(i,j) = F(0,0) + i*G(0,0) ( G(0,0) is always zero ) i&gt;0,j&gt;0 or i&lt;0,j&lt;0: R(i,j) = sign(j)*((-1)^|j|)*F(-|i|,|j| + F(-|i|,-|j|) i&lt;0,j&gt;0 or i&gt;0,j&lt;0: R(i,j) = ((-1)^|j|*G(-|i|,|j|) + sign(j)*G(-|i|,-|j|) i=0,j&gt;0 or i&gt;0,j=0: R(i,j) = sqrt(2)*F(-|i|,-|j|) i=0,j&lt;0 or i&lt;0,j=0: R(i,j) = sign(j+.5)*sqrt(2)*G(-|i|,-|j|)</p>
<p>Lucio Moser March 2009</p>
<p>Additional changes to the original equations: The resulting SH rotation was not matching IECore/OpenEXR rotation conventions ( right-hand rule for X, Y and Z ). In order to match it I've reverted signs on the following cells of the M44 rotation matrix before computing the complex rotation matrix: R(0,2), R(2,0), R(1,2), R(2,1).</p>
<p>Lucio Moser May 2009</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000053">Todo:</a></b></dt><dd>Current implementation does not take advantage of the matrix sparsity. </dd></dl>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/IECore/<a class="el" href="SphericalHarmonicsRotationMatrix_8h_source.html">SphericalHarmonicsRotationMatrix.h</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 5 Jan 2012 for Cortex by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
