<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Cortex: IECore::LRUCache&lt; Key, Ptr &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceIECore.html">IECore</a>::<a class="el" href="classIECore_1_1LRUCache.html">LRUCache</a>
  </div>
</div>
<div class="contents">
<h1>IECore::LRUCache&lt; Key, Ptr &gt; Class Template Reference<br/>
<small>
[<a class="el" href="group__utilityGroup.html">Utilities</a>]</small>
</h1><!-- doxytag: class="IECore::LRUCache" -->
<p><code>#include &lt;<a class="el" href="LRUCache_8h_source.html">LRUCache.h</a>&gt;</code></p>

<p><a href="classIECore_1_1LRUCache-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae558b0fbacb3be93c103bac0309ab0d9"></a><!-- doxytag: member="IECore::LRUCache::KeyType" ref="ae558b0fbacb3be93c103bac0309ab0d9" args="" -->
typedef Key&nbsp;</td><td class="memItemRight" valign="bottom"><b>KeyType</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab02c3ad52da57721a15359eb1a431f7b"></a><!-- doxytag: member="IECore::LRUCache::PtrType" ref="ab02c3ad52da57721a15359eb1a431f7b" args="" -->
typedef Ptr&nbsp;</td><td class="memItemRight" valign="bottom"><b>PtrType</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab756d6d28b2ad275ca9baa070647fb3a"></a><!-- doxytag: member="IECore::LRUCache::Cost" ref="ab756d6d28b2ad275ca9baa070647fb3a" args="" -->
typedef size_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>Cost</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef boost::function&lt; Ptr(const <br class="typebreak"/>
Key &amp;key, Cost &amp;cost)&gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1LRUCache.html#a0b7726db02b686fcd164957c7d24b7c8">GetterFunction</a></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af2fcbc2faf56c4d667a2e0df67d6ee1b"></a><!-- doxytag: member="IECore::LRUCache::LRUCache" ref="af2fcbc2faf56c4d667a2e0df67d6ee1b" args="(GetterFunction getter)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>LRUCache</b> (<a class="el" href="classIECore_1_1LRUCache.html#a0b7726db02b686fcd164957c7d24b7c8">GetterFunction</a> getter)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9acb5e19a61e1954dcadcf09ea8faa7e"></a><!-- doxytag: member="IECore::LRUCache::LRUCache" ref="a9acb5e19a61e1954dcadcf09ea8faa7e" args="(GetterFunction getter, Cost maxCost)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>LRUCache</b> (<a class="el" href="classIECore_1_1LRUCache.html#a0b7726db02b686fcd164957c7d24b7c8">GetterFunction</a> getter, Cost maxCost)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a36429c4a672a7b40303eba871f6a4be2"></a><!-- doxytag: member="IECore::LRUCache::clear" ref="a36429c4a672a7b40303eba871f6a4be2" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>clear</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a589ce9bb237b73eb89b30f9961f0bd60"></a><!-- doxytag: member="IECore::LRUCache::erase" ref="a589ce9bb237b73eb89b30f9961f0bd60" args="(const Key &amp;key)" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>erase</b> (const Key &amp;key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af0ceba2a06676652009d8cf3614621c3"></a><!-- doxytag: member="IECore::LRUCache::setMaxCost" ref="af0ceba2a06676652009d8cf3614621c3" args="(Cost maxCost)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1LRUCache.html#af0ceba2a06676652009d8cf3614621c3">setMaxCost</a> (Cost maxCost)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the maximum cost of the items held in the cache, discarding any items if necessary. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6defe6a793db396fe43d67eb1e6bfd54"></a><!-- doxytag: member="IECore::LRUCache::getMaxCost" ref="a6defe6a793db396fe43d67eb1e6bfd54" args="() const " -->
Cost&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1LRUCache.html#a6defe6a793db396fe43d67eb1e6bfd54">getMaxCost</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the maximum possible cost of cacheable items. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4cef23143aac3491108d781792736355"></a><!-- doxytag: member="IECore::LRUCache::currentCost" ref="a4cef23143aac3491108d781792736355" args="() const " -->
Cost&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1LRUCache.html#a4cef23143aac3491108d781792736355">currentCost</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the current cost of items held in the cache. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Ptr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1LRUCache.html#aa2fa07bfabbd9c3b7825305cfda193b5">get</a> (const Key &amp;key)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1LRUCache.html#ad4a33c3522fc34b91b2a2cdc23ceeac3">set</a> (const Key &amp;key, const Ptr &amp;data, Cost cost)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aecc582422249930926bc38261ccee37e"></a><!-- doxytag: member="IECore::LRUCache::cached" ref="aecc582422249930926bc38261ccee37e" args="(const Key &amp;key) const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1LRUCache.html#aecc582422249930926bc38261ccee37e">cached</a> (const Key &amp;key) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns true if the object is in the cache. <br/></td></tr>
<tr><td colspan="2"><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><b>Status</b> { <br/>
&nbsp;&nbsp;<b>New</b>, 
<b>Caching</b>, 
<b>Cached</b>, 
<b>Erased</b>, 
<br/>
&nbsp;&nbsp;<b>TooCostly</b>, 
<b>Failed</b>
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaafbb075e0ccea851ab4a68e959d8881"></a><!-- doxytag: member="IECore::LRUCache::List" ref="aaafbb075e0ccea851ab4a68e959d8881" args="" -->
typedef std::list&lt; Key &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>List</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f4dae93d7fafafdb6d0200a931b9f87"></a><!-- doxytag: member="IECore::LRUCache::ListIterator" ref="a8f4dae93d7fafafdb6d0200a931b9f87" args="" -->
typedef std::list&lt; Key &gt;::iterator&nbsp;</td><td class="memItemRight" valign="bottom"><b>ListIterator</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6ef82bdce434eb1b4778079085608783"></a><!-- doxytag: member="IECore::LRUCache::Mutex" ref="a6ef82bdce434eb1b4778079085608783" args="" -->
typedef tbb::recursive_mutex&nbsp;</td><td class="memItemRight" valign="bottom"><b>Mutex</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a724ddc085cec5ad862347e28db37466a"></a><!-- doxytag: member="IECore::LRUCache::Cache" ref="a724ddc085cec5ad862347e28db37466a" args="" -->
typedef std::map&lt; Key, CacheEntry &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>Cache</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad98d98a400378b4d8d1a1d543cbcc95a"></a><!-- doxytag: member="IECore::LRUCache::ConstCacheIterator" ref="ad98d98a400378b4d8d1a1d543cbcc95a" args="" -->
typedef std::map&lt; Key, <br class="typebreak"/>
CacheEntry &gt;::const_iterator&nbsp;</td><td class="memItemRight" valign="bottom"><b>ConstCacheIterator</b></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a634a818c0b695a34ca3d700f6386d53d"></a><!-- doxytag: member="IECore::LRUCache::limitCost" ref="a634a818c0b695a34ca3d700f6386d53d" args="(Cost cost)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIECore_1_1LRUCache.html#a634a818c0b695a34ca3d700f6386d53d">limitCost</a> (Cost cost)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clear out any data with a least-recently-used strategy until the current cost does not exceed the specified cost. <br/></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a464543392c8d1320f2093fa19a1619bf"></a><!-- doxytag: member="IECore::LRUCache::m_getter" ref="a464543392c8d1320f2093fa19a1619bf" args="" -->
<a class="el" href="classIECore_1_1LRUCache.html#a0b7726db02b686fcd164957c7d24b7c8">GetterFunction</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_getter</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a34db593058c0da4411a487ca58ac29d8"></a><!-- doxytag: member="IECore::LRUCache::m_mutex" ref="a34db593058c0da4411a487ca58ac29d8" args="" -->
Mutex&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_mutex</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a96f75bc95c0123f0f9541f1d2ccf213c"></a><!-- doxytag: member="IECore::LRUCache::m_maxCost" ref="a96f75bc95c0123f0f9541f1d2ccf213c" args="" -->
Cost&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_maxCost</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af2cc58ffaed6aff053889ae12d700ae6"></a><!-- doxytag: member="IECore::LRUCache::m_currentCost" ref="af2cc58ffaed6aff053889ae12d700ae6" args="" -->
Cost&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_currentCost</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abb98e41bcb116fab0fd8c9c4da2cfe47"></a><!-- doxytag: member="IECore::LRUCache::m_list" ref="abb98e41bcb116fab0fd8c9c4da2cfe47" args="" -->
List&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_list</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a459e13a8e26000c0f3f8d9ed2d41c825"></a><!-- doxytag: member="IECore::LRUCache::m_cache" ref="a459e13a8e26000c0f3f8d9ed2d41c825" args="" -->
Cache&nbsp;</td><td class="memItemRight" valign="bottom"><b>m_cache</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;typename Key, typename Ptr&gt;<br/>
 class IECore::LRUCache&lt; Key, Ptr &gt;</h3>

<p>A templated cache with a Least-Recently-Used disposal mechanism. Each item to be retrieved is "calculated" by a function which can also state the "cost" of that piece of data. The cache has a maximum cost, and attempts to add any data which would exceed this results in the LRU items being discarded. Template parameters are the key by which the data is accessed and a smart pointer type which can be used to point to the data. </p>
<dl class="user"><dt><b>Threading:</b></dt><dd>It should be safe to call the methods of <a class="el" href="classIECore_1_1LRUCache.html">LRUCache</a> from concurrent threads. </dd></dl>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a0b7726db02b686fcd164957c7d24b7c8"></a><!-- doxytag: member="IECore::LRUCache::GetterFunction" ref="a0b7726db02b686fcd164957c7d24b7c8" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key, typename Ptr&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::function&lt;Ptr ( const Key &amp;key, Cost &amp;cost )&gt; <a class="el" href="classIECore_1_1LRUCache.html">IECore::LRUCache</a>&lt; Key, Ptr &gt;::<a class="el" href="classIECore_1_1LRUCache.html#a0b7726db02b686fcd164957c7d24b7c8">GetterFunction</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The GetterFunction is responsible for computing the value and cost for a cache entry when given the key. It should throw a descriptive exception if it can't get the data for any reason. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aa2fa07bfabbd9c3b7825305cfda193b5"></a><!-- doxytag: member="IECore::LRUCache::get" ref="aa2fa07bfabbd9c3b7825305cfda193b5" args="(const Key &amp;key)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key, typename Ptr&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">Ptr <a class="el" href="classIECore_1_1LRUCache.html">IECore::LRUCache</a>&lt; Key, Ptr &gt;::get </td>
          <td>(</td>
          <td class="paramtype">const Key &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieves the item from the cache, computing it if necessary. Throws if the item can not be computed. </p>

</div>
</div>
<a class="anchor" id="ad4a33c3522fc34b91b2a2cdc23ceeac3"></a><!-- doxytag: member="IECore::LRUCache::set" ref="ad4a33c3522fc34b91b2a2cdc23ceeac3" args="(const Key &amp;key, const Ptr &amp;data, Cost cost)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key, typename Ptr&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classIECore_1_1LRUCache.html">IECore::LRUCache</a>&lt; Key, Ptr &gt;::set </td>
          <td>(</td>
          <td class="paramtype">const Key &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Ptr &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Cost&nbsp;</td>
          <td class="paramname"> <em>cost</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Registers an object in the cache directly. Returns true for success and false on failure - failure can occur if the cost exceeds the maximum cost for the cache. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/IECore/<a class="el" href="LRUCache_8h_source.html">LRUCache.h</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 5 Jan 2012 for Cortex by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
