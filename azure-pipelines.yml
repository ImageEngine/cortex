trigger:
  branches:
    include:
    - master

jobs :

   # We build on linux using a Docker container generated by GafferHQ/build.
   # We have to use a manual matrix as single job + strategy doesn't allow for
   # conditional parameters. We have to specify `container` on linux, but not
   # for mac. Specifying an empty container breaks validation earlier on in the
   # job setup phase, a valid image name breaks on mac as docker isn't available.

  - template: config/azure/build.yaml
    parameters:
      name: CENTOS
      displayName: Centos
      vmImage: 'Ubuntu-16.04'
      container: 'gafferhq/build:1.0.0'
      options: config/azure/options.linux

  - template: config/azure/build.yaml
    parameters:
      name: CENTOS
      buildType: DEBUG
      displayName: 'Centos (debug)'
      vmImage: 'Ubuntu-16.04'
      container: 'gafferhq/build:1.0.0'
      options: config/azure/options.linux
